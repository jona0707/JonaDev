---
import Jona from "../components/icons/Jona.astro";
import MoonIcon from "../components/icons/MoonIcon.astro";
import SunIcon from "../components/icons/SunIcon.astro";
const theme = true;
---

<div class="flex justify-between fixed top-6 w-full px-10 items-center z-50">
  <a href="#inicio">
    <Jona />
  </a>
  <div class="mt-2">
    <slot />
  </div>
  <button id="theme-toggle">
    <div id="theme-icons">
      <SunIcon id="theme-icon-sun" class={!theme ? "hidden" : ""} />
      <MoonIcon id="theme-icon-moon" class={theme ? "hidden" : ""} />
    </div>
  </button>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const themeToggle = document.getElementById("theme-toggle");
    const htmlElement = document.documentElement;
    const sunIcon = document.getElementById("theme-icon-sun");
    const moonIcon = document.getElementById("theme-icon-moon");

    const updateIcons = () => {
      if (htmlElement.classList.contains("dark")) {
        if (sunIcon && moonIcon) {
          sunIcon.classList.add("hidden");
          moonIcon.classList.remove("hidden");
        }
      } else {
        if (sunIcon && moonIcon) {
          sunIcon.classList.remove("hidden");
          moonIcon.classList.add("hidden");
        }
      }
    };

    if (themeToggle) {
      themeToggle.addEventListener("click", () => {
        htmlElement.classList.toggle("dark");
        updateIcons();
      });
    }

    // Llama a updateIcons al cargar la página para asegurarte de que los iconos están correctos
    updateIcons();
  });
</script>
